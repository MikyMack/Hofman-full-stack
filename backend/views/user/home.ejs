<!DOCTYPE html>
<html lang="en">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <title>Hofmaan | Home</title>

    <meta name="keywords" content="Hofmaan" />
    <meta name="description" content="Hofmaan">
    <meta name="author" content="Trivlogic">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/images/logo.png">

    <!-- WebFont.js -->
    <script>
        WebFontConfig = {
            google: { families: ['Poppins:400,500,600,700,800', 'Jost:400,500,600,700,800'] }
        };
        (function (d) {
            var wf = d.createElement('script'), s = d.scripts[0];
            wf.src = '/js/webfont.js';
            wf.async = true;
            s.parentNode.insertBefore(wf, s);
        })(document);
    </script>

    <link rel="preload" href="/vendor/fontawesome-free/webfonts/fa-regular-400.woff2" as="font" type="font/woff2"
        crossorigin="anonymous">
    <link rel="preload" href="/vendor/fontawesome-free/webfonts/fa-solid-900.woff2" as="font" type="font/woff2"
        crossorigin="anonymous">
    <link rel="preload" href="/vendor/fontawesome-free/webfonts/fa-brands-400.woff2" as="font" type="font/woff2"
        crossorigin="anonymous">
    <link rel="preload" href="/fonts/wolmart87d5.ttf?png09e" as="font" type="font/ttf" crossorigin="anonymous">

    <!-- Vendor CSS -->
    <link rel="stylesheet" type="text/css" href="/vendor/fontawesome-free/css/all.min.css">

    <!-- Plugins CSS -->
    <link rel="stylesheet" type="text/css" href="/vendor/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" type="text/css" href="/vendor/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/vendor/magnific-popup/magnific-popup.min.css">

    <!-- Default CSS -->
    <link rel="stylesheet" type="text/css" href="/css/demo12.min.css">
    <link rel="stylesheet" type="text/css" href="/css/style.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <style>
        /* Highlight selected size */
        .size-option.active,
        .size-option.selected {
            background: #001F3F !important;
            color: #fff !important;
            border-color: #001F3F !important;
            box-shadow: 0 0 0 2px #a5d6a7;
        }

        /* Highlight selected color */
        .color-option.active,
        .color-option.selected {
            border: 2px solid #001F3F !important;
            box-shadow: 0 0 0 2px #a5d6a7;
            outline: 2px solid #001F3F;
        }
    </style>
</head>

<body class="home">
    <div class="page-wrapper">
        <h1 class="d-none">Hofmaan | Home</h1>
        <!-- Start of Header -->
        <header class="header">
            <div class="header-top">
                <div class="container">
                    <div class="header-left">
                        <p class="welcome-msg">Welcome to Hofmaan Store! Offers Available</p>
                    </div>
                    <div class="header-right">
                        <span class="divider d-lg-show"></span>
                        <a href="/store" class="d-lg-show">Store</a>
                        <a href="/about" class="d-lg-show">About Us</a>
                        <a href="/contact" class="d-lg-show">Contact Us</a>
                        <% if (user) { %>
                            <a href="/account" class="d-lg-show"><i class="w-icon-account"></i>Profile</a>
                            <span class="delimiter d-lg-show">/</span>
                            <a href="/orders" class="ml-0 d-lg-show">My Orders</a>
                            <% } else { %>
                                <a href="/auth/login" class="d-lg-show"><i class="w-icon-account"></i>Sign In</a>
                                <span class="delimiter d-lg-show">/</span>
                                <a href="/auth/login" class="ml-0 d-lg-show">Register</a>
                                <% } %>
                    </div>
                </div>
            </div>
            <!-- End of Header Top -->
            <div class="header-middle sticky-content fix-top sticky-header border-no">
                <div class="container">
                    <div class="header-left mr-md-4">
                        <a href="#" class="mobile-menu-toggle  w-icon-hamburger"></a>
                        <a href="/" class="logo">
                            <img src="/images/logo.png" alt="logo" width="250">
                        </a>
                        <form method="get" action="#"
                            class="input-wrapper header-search hs-expanded hs-round d-none d-md-flex">
                            <input type="text" class="form-control bg-white pt-0 pb-0" name="search" id="search"
                                placeholder="Search in..." required />
                            <button class="btn btn-search" type="submit">
                                <i class="w-icon-search"></i>
                            </button>
                        </form>
                    </div>
                    <div class="header-right ml-4">
                        <div class="header-call d-xs-show d-lg-flex align-items-center">
                            <a href="tel:#" class="w-icon-call"></a>
                            <div class="call-info d-lg-show">
                                <h4 class="chat font-size-md text-normal ls-normal text-white mb-0">
                                    <a href="" class="text-capitalize text-primary font-weight-normal">Customer care</a>
                                </h4>
                                <a href="tel:#" class="phone-number font-weight-bolder ls-50">+911234567890</a>
                            </div>
                        </div>
                        <a class="wishlist label-down link d-xs-show" href="/wishlist">
                            <i class="w-icon-heart"></i>
                            <span class="wishlist-label d-lg-show">Wishlist</span>
                        </a>
                        <div class="dropdown cart-dropdown cart-offcanvas mr-0 mr-lg-2">
                            <div class="cart-overlay"></div>
                            <a href="/cart" class="cart-toggle label-down link">
                                <i class="w-icon-cart">
                                    <span class="cart-count text-white">
                                        <% if (user) { %>
                                            <%= cartItems && cartItems.length ? cartItems.length : " " %>
                                                <% } else { %>
                                                    <span id="guest-cart-count"></span>
                                                    <script>
                                                        document.addEventListener('DOMContentLoaded', function () {
                                                            var guestCartCount = document.getElementById('guest-cart-count');
                                                            var guestCart = localStorage.getItem('guestCart');
                                                            var count = 0;
                                                            if (guestCart) {
                                                                try {
                                                                    var cartArr = JSON.parse(guestCart);
                                                                    if (Array.isArray(cartArr)) {
                                                                        count = cartArr.length;
                                                                    }
                                                                } catch (e) { }
                                                            }
                                                            guestCartCount.textContent = count > 0 ? count : " ";
                                                        });
                                                    </script>
                                                    <% } %>
                                    </span>
                                </i>
                                <span class="cart-label">Cart</span>
                            </a>
                            <div class="dropdown-box">
                                <div class="cart-header">
                                    <span>Shopping Cart</span>
                                    <a href="#" class="btn-close">Close<i class="w-icon-long-arrow-right"></i></a>
                                </div>
                                <div class="products" id="cart-products-list">
                                    <% if (user && cartItems && cartItems.length> 0) { %>
                                        <% cartItems.forEach(function(item) { %>
                                            <div class="product product-cart">
                                                <div class="product-detail">
                                                    <a href="/product/<%= item.product %>" class="product-name">
                                                        <%= item.productName %>
                                                    </a>
                                                    <div class="price-box">
                                                        <span class="product-quantity">
                                                            <%= item.quantity %>
                                                        </span>
                                                        <span class="product-price ml-2">
                                                            â‚¹<%= item.price ? item.price.toFixed(2) : '0.00' %>
                                                        </span>
                                                        <% if (item.selectedColor) { %>
                                                            <span class="badge badge-light ml-2">Color: <%=
                                                                    item.selectedColor %></span>
                                                            <% } %>
                                                                <% if (item.selectedSize) { %>
                                                                    <span class="badge badge-light ml-2">Size: <%=
                                                                            item.selectedSize %></span>
                                                                    <% } %>
                                                    </div>
                                                </div>
                                                <figure class="product-media">
                                                    <img src="<%= item.productImage %>" alt="product" height="84"
                                                        width="94">
                                                </figure>
                                            </div>
                                            <% }); %>
                                                <% } else if (!user) { %>
                                                    <!-- Guest cart will be rendered by JS -->
                                                    <% } else { %>
                                                        <div class="text-center py-3">
                                                            <span>Your cart is empty.</span>
                                                        </div>
                                                        <% } %>
                                </div>
                                <div class="cart-total" id="cart-subtotal-section">
                                    <label>Subtotal:</label>
                                    <span class="price" id="cart-subtotal-amount">
                                        â‚¹<%= user && typeof cartSubtotal==='number' ? cartSubtotal.toFixed(2) : '0.00'
                                            %>
                                    </span>
                                </div>
                                <div class="cart-action">
                                    <a href="/cart" class="btn btn-dark btn-outline btn-rounded">View Cart</a>
                                    <a href="/checkout" class="btn btn-primary btn-rounded">Checkout</a>
                                </div>
                            </div>
                            <% if (!user) { %>
                                <script>
                                    // Guest cart rendering for non-logged-in users
                                    function renderGuestCart() {
                                        const cartProductsList = document.getElementById('cart-products-list');
                                        const subtotalSection = document.getElementById('cart-subtotal-amount');
                                        let guestCart = localStorage.getItem('guestCart');
                                        if (!guestCart) {
                                            cartProductsList.innerHTML = '<div class="text-center py-3"><span>Your cart is empty.</span></div>';
                                            subtotalSection.textContent = 'â‚¹0.00';
                                            return;
                                        }
                                        try {
                                            guestCart = JSON.parse(guestCart);
                                        } catch (e) {
                                            cartProductsList.innerHTML = '<div class="text-center py-3"><span>Your cart is empty.</span></div>';
                                            subtotalSection.textContent = 'â‚¹0.00';
                                            return;
                                        }
                                        // guestCart is now an array of cart items
                                        if (!Array.isArray(guestCart) || guestCart.length === 0) {
                                            cartProductsList.innerHTML = '<div class="text-center py-3"><span>Your cart is empty.</span></div>';
                                            subtotalSection.textContent = 'â‚¹0.00';
                                            return;
                                        }
                                        let html = '';
                                        let subtotal = 0;
                                        guestCart.forEach(function (item) {
                                            subtotal += (item.price || 0) * (item.quantity || 1);
                                            html += `
                                            <div class="product product-cart">
                                                <div class="product-detail">
                                                    <a href="/product/${item.productId}" class="product-name">
                                                        ${item.productName || ''}
                                                    </a>
                                                    <div class="price-box">
                                                        <span class="product-quantity">
                                                            ${item.quantity || 1}
                                                        </span>
                                                        <span class="product-price ml-2">
                                                            â‚¹${item.price ? Number(item.price).toFixed(2) : '0.00'}
                                                        </span>
                                                        ${item.selectedColor ? `<span class="badge badge-light ml-2">Color: ${item.selectedColor}</span>` : ''}
                                                        ${item.selectedSize ? `<span class="badge badge-light ml-2">Size: ${item.selectedSize}</span>` : ''}
                                                    </div>
                                                </div>
                                                <figure class="product-media">
                                                    <img src="${item.productImage || ''}" alt="product" height="84" width="94">
                                                </figure>
                                            </div>
                                        `;
                                        });
                                        cartProductsList.innerHTML = html;
                                        subtotalSection.textContent = 'â‚¹' + subtotal.toFixed(2);
                                    }
                                    document.addEventListener('DOMContentLoaded', renderGuestCart);
                                </script>
                                <% } %>
                                    <!-- End of Dropdown Box -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- End of Header Middle -->
        </header>
        <!-- End of Header -->
        <!-- Start of Main -->
        <main class="main">
            <div class="container pb-2">
                <div class="category-wrapper pt-4">
                    <% categories.forEach(category=> { %>
                        <div class="category text-center py-2 px-3 dropdown">
                            <h4 class="category-name">
                                <a href="/category/<%= category._id %>">
                                    <%= category.name %>
                                </a>
                            </h4>

                            <% if (category.subCategories && category.subCategories.length> 0) { %>
                                <div class="subcategory-dropdown">
                                    <% category.subCategories.forEach(sub=> { %>
                                        <% if (sub.isActive) { %>
                                            <a href="/subcategory/<%= sub._id %>">
                                                <%= sub.name %>
                                            </a>
                                            <% } %>
                                                <% }) %>
                                </div>
                                <% } %>
                        </div>
                        <% }) %>
                </div>


                <!-- Main Banner Full Width -->
                <div class="intro-section mb-2">
                    <div class="row">
                        <div class="col-12 mt-4 mb-4">
                            <div class="swiper-container swiper-theme pg-inner pg-white animation-slider"
                                data-swiper-options="{
                                    'spaceBetween': 0,
                                    'slidesPerView': 1,
                                    'autoplay': {
                                        'delay': 4500,
                                        'disableOnInteraction': false
                                    },
                                    'loop': true,
                                    'effect': 'fade',
                                    'fadeEffect': { 'crossFade': true },
                                    'speed': 1500
                                }">
                                <div class="swiper-wrapper row gutter-no cols-1">
                                    <% if (mainBanner && mainBanner.length> 0) { %>
                                        <% mainBanner.forEach((banner, index)=> { %>
                                            <div class="swiper-slide banner banner-fixed intro-slide br-sm"
                                                style="background-image: url(<%= banner.image %>); background-color: #EAEAEA; position: relative; height: 400px; background-size: cover; background-position: center;">
                                                <div class="main-banner-content-wrapper" style="
                                                        position: absolute;
                                                        top: 50%;
                                                        transform: translateY(-50%);
                                                        width: 100%;
                                                        padding: 0 60px;
                                                        display: flex;
                                                        justify-content: <%= index % 2 === 0 ? 'flex-start' : 'flex-end' %>;
                                                    ">
                                                    <div class="banner-content text-<%= index % 2 === 0 ? 'left' : 'right' %>"
                                                        style="max-width: 600px;">
                                                        <% if (banner.subtitle) { %>
                                                            <h3 class="banner-subtitle text-uppercase font-secondary font-weight-bolder slide-animate text-black"
                                                                data-animation-options="{'name': 'fadeInLeftShorter', 'duration': '.5s', 'delay': '.2s'}">
                                                                <%= banner.subtitle %>
                                                            </h3>
                                                            <% } %>
                                                                <% if (banner.title) { %>
                                                                    <h2 class="banner-title font-secondary text-capitalize text-black slide-animate"
                                                                        data-animation-options="{'name': 'fadeInRightShorter', 'duration': '.5s', 'delay': '.4s'}">
                                                                        <%= banner.title %>
                                                                    </h2>
                                                                    <% } %>
                                                                        <% if (banner.description) { %>
                                                                            <h4 class="banner-price-info font-weight-normal text-black ls-25 slide-animate"
                                                                                data-animation-options="{'name': 'fadeInRightShorter', 'duration': '.5s', 'delay': '.4s'}">
                                                                                <% const
                                                                                    words=banner.description.split(' ');
                                                                    if (words.length > 6) {
                                                                        const firstSix = words.slice(0, 6).join(' ');
                                                                        const rest = words.slice(6).join(' ');
                                                                %>
                                                                    <%= firstSix %><br><%= rest %>
                                                                <% 
                                                                    } else { 
                                                                %>
                                                                    <%= banner.description %>
                                                                <% 
                                                                    }
                                                                %>
                                                            </h4>
                                                        <% } %>
                                                        <% if (banner.link) { %>
                                                            <a href="<%= banner.link %>"
                                                                class="btn btn-outline btn-black btn-rounded btn-icon-right slide-animate"
                                                                data-animation-options="{' name': 'fadeInUpShorter'
                                                                                    , 'duration' : '.5s' , 'delay'
                                                                                    : '.6s' }">
                                                                                    Shop Now
                                                                                    <i
                                                                                        class="w-icon-long-arrow-right"></i>
                                                                                    </a>
                                                                                    <% } %>
                                                    </div>
                                                </div>
                                            </div>
                                            <% }) %>
                                                <% } %>
                                </div>
                                <div class="swiper-pagination"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Banner Two Row Below Main Banner -->
                <div class="intro-banner-row mb-2">
                    <div class="row">
                        <% if (bannerTwo && bannerTwo.length> 0) { %>
                            <% bannerTwo.forEach((banner, index)=> { %>
                                <div class="col-lg-6 col-md-6 col-12 mb-4">
                                    <div
                                        class="banner banner-fixed intro-banner<%= index === 1 ? ' intro-banner2' : '' %> br-sm h-100">
                                        <figure class="br-sm">
                                            <img src="<%= banner.image %>" alt="Category Banner" width="680"
                                                height="180"
                                                style="background-color: #565960; object-fit: cover; width: 100%;" />
                                        </figure>
                                        <div class="banner-content">
                                            <% if (banner.subtitle) { %>
                                                <h5
                                                    class="banner-subtitle text-uppercase font-weight-bold <%= index === 1 ? 'text-default' : 'text-lighter' %>">
                                                    <%= banner.subtitle %>
                                                </h5>
                                                <% } %>
                                                    <% if (banner.title) { %>
                                                        <h3
                                                            class="banner-title font-secondary font-weight-bolder ls-25 <%= index === 1 ? 'text-dark' : 'text-white' %>">
                                                            <%= banner.title %>
                                                        </h3>
                                                        <% } %>
                                                            <% if (banner.link) { %>
                                                                <a href="<%= banner.link %>"
                                                                    class="btn <%= index === 1 ? 'btn-dark' : 'btn-white' %> btn-link btn-slide-right btn-icon-right btn-infinite">
                                                                    Shop Now
                                                                    <i class="w-icon-long-arrow-right"></i>
                                                                </a>
                                                                <% } %>
                                        </div>
                                    </div>
                                </div>
                                <% }) %>
                                    <% } %>
                    </div>
                </div>
                <!-- End of Intro-wrapper -->
                <div class="swiper-container swiper-theme icon-box-wrapper br-sm mt-0 mb-10 appear-animate"
                data-swiper-options="{
                'slidesPerView': 1,
                'breakpoints': {
                    '576': {
                        'slidesPerView': 2
                    },
                    '992': {
                        'slidesPerView': 3
                    },
                    '1200': {
                        'slidesPerView': 4
                    }
                }}">
                <div class="py-4">
                    <h3 class="font-secondary font-weight-bolder mb-3 text-center" style="letter-spacing:1px;">
                        Our Brand & Sub-Brand
                    </h3>
                    <div class="row justify-content-center align-items-center w-100 mx-0">
                        <div class="col-6 col-sm-4 col-md-3 d-flex justify-content-center mb-3 mb-md-0">
                            <img src="/images/logo.png" alt="Hofmaan Logo" class="img-fluid" style="max-height:60px; width:auto;">
                           
                        </div>
                        <div class="col-6 col-sm-4 col-md-3 d-flex justify-content-center">
                            <img src="/images/logo-2.png" alt="Blackbuck Logo" class="img-fluid" style="max-height:60px; width:auto;">
                          
                    </div>
                </div>
            </div>
            <!-- End of Iocn Box Wrapper -->

            <div class="title-link-wrapper title-select after-none appear-animate">
                <h2 class="title font-secondary font-weight-bolder">Best Deals</h2>
                <a href="/store" class="font-weight-bold ls-25">
                    All Products
                    <i class="w-icon-long-arrow-right"></i>
                </a>
            </div>
            <div class="swiper-container swiper-theme select-product-wrapper shadow-swiper appear-animate pb-2 mb-10"
                data-swiper-options='{
                "spaceBetween": 20,
                "slidesPerView": 2,
                "breakpoints": {
                    "768": { "slidesPerView": 3 },
                    "992": { "slidesPerView": 4 },
                    "1200": { "slidesPerView": 5 }
                }
            }'>
                <div class="swiper-wrapper row cols-lg-5 cols-md-4 cols-sm-3 cols-2">
                    <% bestDeals.forEach(product=> { %>
                        <div class="swiper-slide product product-image-gap product-simple"
                            data-product-id="<%= product._id %>" data-has-color="<%= product.hasColorVariants %>"
                            data-has-size="<%= product.hasSizeVariants %>"
                            data-product-name="<%= product.name.replace(/" /g, '&quot;' ) %>"
                            data-product-image="<%= product.images[0] %>"
                                data-product-price="<%= product.salePrice || product.basePrice %>">

                                    <figure class="product-media">
                                        <a href="/product/<%= product._id %>">
                                            <img src="<%= product.images[0] %>" alt="Product" width="295"
                                                height="335" loading="lazy" />
                                            <% if (product.images[1]) { %>
                                                <img src="<%= product.images[1] %>" alt="Product" width="295"
                                                    height="335" loading="lazy" />
                                                <% } %>
                                        </a>
                                    </figure>

                                    <div class="product-details">
                                        <a href="#" class="btn-wishlist w-icon-heart" title="Add to wishlist"></a>
                                        <h4 class="product-name">
                                            <a href="/product/<%= product._id %>">
                                                <%= product.name %>
                                            </a>
                                        </h4>

                                        <div class="product-variations flex flex-wrap mb-2">
                                            <% if (product.hasSizeVariants) { %>
                                                <div class="product-size mr-3 d-flex align-items-center">
                                                    <span class="font-weight-bold mr-1">Size:</span>
                                                    <div>
                                                        <% product.sizeVariants.forEach(size=> { %>
                                                            <span
                                                                class="size-option badge badge-light border px-2 py-1 mr-1"
                                                                data-size="<%= size.size %>"
                                                                data-stock="<%= size.stock %>"
                                                                style="cursor:pointer;">
                                                                <%= size.size %>
                                                            </span>
                                                            <% }) %>
                                                    </div>
                                                </div>
                                                <% } %>

                                                    <% if (product.hasColorVariants) { %>
                                                        <div class="product-color">
                                                            <span class="font-weight-bold mr-1"></span>
                                                            <% product.colorVariants.forEach(color=> { %>
                                                                <span
                                                                    class="color-option border rounded-circle d-inline-block mr-1 mb-1"
                                                                    data-color="<%= color.color %>"
                                                                    data-stock="<%= color.stock %>"
                                                                    title="<%= color.color %>"
                                                                    style="width:22px;height:22px;vertical-align:middle;cursor:pointer;background:<%= color.color %>;border:2px solid #eee;display:inline-block;">
                                                                </span>
                                                                <% }) %>
                                                        </div>
                                                        <% } %>
                                        </div>

                                        <div class="selected-variant-info"
                                            style="min-height:24px;font-size:0.95em;color:#444;">
                                            <!-- Will be filled by JS -->
                                        </div>

                                        <div class="product-pa-wrapper">
                                            <div class="product-price">
                                                <ins class="new-price">â‚¹<%= product.salePrice || product.basePrice
                                                        %></ins>
                                                <% if (product.salePrice) { %>
                                                    <del class="old-price">â‚¹<%= product.basePrice %></del>
                                                    <% } %>
                                            </div>
                                            <div class="product-action">
                                                <button
                                                    class="btn-cart btn-product btn btn-link btn-underline add-to-cart-btn"
                                                    data-product-id="<%= product._id %>"
                                                    data-has-color="<%= product.hasColorVariants %>"
                                                    data-has-size="<%= product.hasSizeVariants %>"
                                                    data-product-name="<%= product.name.replace(/" /g, '&quot;' )
                                                    %>"
                                                    data-product-image="<%= product.images[0] %>"
                                                        data-product-price="<%= product.salePrice ||
                                                            product.basePrice %>">
                                                            Add To Cart
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                        </div>
                        <% }) %>
                </div>
                <div class="swiper-pagination mt-4"></div>
            </div>

            <!-- End of Selected Products Wrapper -->

            <div class="banner-wrapper appear-animate row cols-md-2 mb-7">
                <% if (bannerThree && bannerThree.length> 0) { %>
                    <% bannerThree.slice(0, 2).forEach((banner, index)=> { %>
                        <div class="banner banner-fixed overlay-dark br-sm mt-4">
                            <figure class="br-sm">
                                <img src="<%= banner.image %>" alt="Category Banner" width="680" height="180"
                                    style="background-color: <%= index === 1 ? '#E5E6E8' : '#565960' %>; object-fit: cover;"
                                    loading="lazy" />
                            </figure>
                            <div class="banner-content y-50">
                                <% if (banner.description) { %>
                                    <h4
                                        class="banner-price-info font-secondary font-weight-normal mb-0 <%= index === 1 ? 'text-default' : 'text-lighter' %>">
                                        <%= banner.description %>
                                    </h4>
                                    <% } %>
                                        <% if (banner.title) { %>
                                            <h2
                                                class="banner-title font-secondary <%= index === 1 ? 'text-dark' : 'text-white' %>">
                                                <%= banner.title %>
                                            </h2>
                                            <% } %>
                                                <% if (banner.subtitle) { %>
                                                    <h3
                                                        class="banner-subtitle font-weight-normal <%= index === 1 ? 'text-default' : 'text-lighter' %>">
                                                        <%= banner.subtitle %>
                                                    </h3>
                                                    <% } %>
                                                        <% if (banner.link) { %>
                                                            <a href="<%= banner.link %>"
                                                                class="btn btn-sm btn-outline <%= index === 1 ? 'btn-dark' : 'btn-white' %> btn-rounded btn-icon-right slide-animate">
                                                                Shop Now
                                                                <i class="w-icon-long-arrow-right"></i>
                                                            </a>
                                                            <% } %>
                            </div>
                        </div>
                        <% }) %>
                            <% } %>
            </div>

            <!-- End of Banner-wrapper -->

            <div class="title-link-wrapper title-deals after-none appear-animate">
                <h2 class="title font-secondary mb-1">Deals Of The Day</h2>
                <a href="/store" class="font-weight-bold ls-25">
                    More Products
                    <i class="w-icon-long-arrow-right"></i>
                </a>
            </div>
            <div class="swiper-container swiper-theme mb-4 pg-inner animation-slider" data-swiper-options='{
                "spaceBetween": 20,
                "slidesPerView": 1,
                "breakpoints": {
                    "992": {
                        "slidesPerView": 2
                    }
                }
            }'>
                <div class="swiper-wrapper row cols-lg-2">
                    <% dealsOfTheDay.forEach(product=> { %>
                        <div class="swiper-slide product product-list br-sm mb-0"
                            data-product-id="<%= product._id %>"
                            data-has-color="<%= !!(product.colorVariants && product.colorVariants.length) %>"
                            data-has-size="<%= !!(product.sizeVariants && product.sizeVariants.length) %>"
                            data-product-name="<%= product.name.replace(/" /g, '&quot;' ) %>"
                            data-product-image="<%= product.images[0] %>"
                                data-product-price="<%= product.salePrice || product.basePrice %>">
                                    <figure class="product-media">
                                        <a href="/product/<%= product._id %>">
                                            <img src="<%= product.images[0] %>" alt="Product Image" width="315"
                                                height="355" loading="lazy">
                                            <% if (product.images[1]) { %>
                                                <img src="<%= product.images[1] %>" alt="Product Image" width="315"
                                                    height="355" loading="lazy">
                                                <% } %>
                                        </a>
                                    </figure>
                                    <div class="product-details">
                                        <h4 class="product-name">
                                            <a href="/product/<%= product._id %>">
                                                <%= product.name %>
                                            </a>
                                        </h4>
                                        <div class="product-variations flex flex-wrap justify-content-start">
                                            <% if (product.sizeVariants && product.sizeVariants.length) { %>
                                                <div class="product-size mr-3 d-flex align-items-center">
                                                    <span class="font-weight-bold mr-1">Size:</span>
                                                    <div>
                                                        <% product.sizeVariants.forEach(size=> { %>
                                                            <span
                                                                class="size-option badge badge-light border px-2 py-1 mr-1"
                                                                data-size="<%= size.size %>"
                                                                data-stock="<%= size.stock %>"
                                                                style="cursor:pointer;">
                                                                <%= size.size %>
                                                            </span>
                                                            <% }) %>
                                                    </div>
                                                </div>
                                                <% } %>
                                                    <% if (product.colorVariants && product.colorVariants.length) {
                                                        %>
                                                        <div class="product-color">
                                                            <span class="font-weight-bold mr-1"></span>
                                                            <% product.colorVariants.forEach(color=> { %>
                                                                <span
                                                                    class="color-option border rounded-circle d-inline-block mr-1 mb-1"
                                                                    data-color="<%= color.color %>"
                                                                    data-stock="<%= color.stock %>"
                                                                    title="<%= color.color %>"
                                                                    style="width:22px;height:22px;vertical-align:middle;cursor:pointer;background:<%= color.color %>;border:2px solid #eee;display:inline-block;">
                                                                </span>
                                                                <% }) %>
                                                        </div>
                                                        <% } %>
                                        </div>
                                        <div class="selected-variant-info"
                                            style="min-height:24px;font-size:0.95em;color:#444;">
                                            <!-- Will be filled by JS -->
                                        </div>
                                        <div class="product-price">
                                            <ins class="new-price">â‚¹<%= product.salePrice || product.basePrice %>
                                            </ins>
                                            <% if (product.salePrice) { %>
                                                <del class="old-price">â‚¹<%= product.basePrice %></del>
                                                <% } %>
                                        </div>
                                        <p class="text-default">
                                            <%= product.description.substring(0, 100) %>...
                                        </p>
                                        <div class="product-action">
                                            <button
                                                class="btn-cart btn-product btn btn-link btn-underline add-to-cart-btn"
                                                data-product-id="<%= product._id %>"
                                                data-has-color="<%= !!(product.colorVariants && product.colorVariants.length) %>"
                                                data-has-size="<%= !!(product.sizeVariants && product.sizeVariants.length) %>"
                                                data-product-name="<%= product.name.replace(/" /g, '&quot;' ) %>"
                                                data-product-image="<%= product.images[0] %>"
                                                    data-product-price="<%= product.salePrice || product.basePrice
                                                        %>">
                                                        <i class="w-icon-cart"></i>
                                                        <span>Add to cart</span>
                                            </button>
                                            <a href="/wishlist/add/<%= product._id %>"
                                                class="btn-product-icon btn-wishlist w-icon-heart"
                                                title="Add to wishlist"></a>
                                        </div>
                                    </div>
                        </div>
                        <% }); %>
                </div>
            </div>

            <!-- End of Swiper -->

            <div class="swiper-container swiper-theme mb-8 pg-inner animation-slider" data-swiper-options='{
                "spaceBetween": 20,
                "slidesPerView": 1,
                "breakpoints": {
                    "576": { "slidesPerView": 2 },
                    "768": { "slidesPerView": 3 },
                    "992": { "slidesPerView": 4 }
                }
            }'>
                <div class="swiper-wrapper row cols-xl-4 cols-lg-3 cols-sm-2 cols-1">
                    <% allProducts.forEach(product=> { %>
                        <div class="swiper-slide">
                            <div class="product-widget-wrap">
                                <div class="product product-widget">
                                    <figure class="product-media">
                                        <a href="/product/<%= product._id %>">
                                            <img src="<%= product.images[0] || '/images/default.jpg' %>"
                                                alt="Product" width="100" height="106">
                                            <% if (product.images.length> 1) { %>
                                                <img src="<%= product.images[1] %>" alt="Product" width="100"
                                                    height="106">
                                                <% } %>
                                        </a>
                                    </figure>
                                    <div class="product-details">
                                        <h4 class="product-name">
                                            <a href="/product/<%= product._id %>">
                                                <%= product.name %>
                                            </a>
                                        </h4>
                                        <div class="product-price">
                                            <ins class="new-price">â‚¹<%= product.salePrice || product.basePrice %>
                                            </ins>
                                            <% if (product.salePrice && product.salePrice < product.basePrice) { %>
                                                <del class="old-price">â‚¹<%= product.basePrice %></del>
                                                <% } %>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <% }) %>
                </div>
            </div>

            <!-- End of Swiper -->
        </div>

                <div class="banner banner-fixed purchase-banner appear-animate">
                    <figure class="banner-img">
                        <img src="/images/demos/demo12/banner/banner-5.jpg" alt="Banner" width="680" height="180"
                            style="background-color: #342E30;" />
                    </figure>
                    <div class="banner-content text-center x-50 y-50 slide-animate"
                        data-animation-options="{'name': 'fadeInLeftShorter', 'duration': '15s', 'delay': '3s'}">
                        <h3 class="banner-subtitle text-white text-uppercase font-secondary font-weight-bold">Today's
                            Special</h3>
                        <h2 class="banner-title text-white text-uppercase font-secondary font-weight-bolder mb-2">
                            Trending
                            Accessories Collection</h2>
                        <p class="text-lighter font-weight-normal">
                            Free shipping on clearance orders of â‚¹120
                            or more
                        </p>
                        <a href="#0" class="btn btn-lg btn-outline btn-white btn-rounded btn-icon-right slide-animate">
                            Purchase Now
                            <i class="w-icon-long-arrow-right"></i>
                        </a>
                    </div>
                </div>
                <!-- End of Banner -->
                <div class="container">
                    <h2
                        class="title title-latest-product font-secondary font-weight-bolder justify-content-center ls-normal mt-10 mb-2 pt-1 appear-animate">
                        All Products
                    </h2>
                    <div class="tab tab-latest-product tab-nav-center tab-nav-underline tab-line-grow appear-animate">
                        <ul class="nav nav-tabs bb-no justify-content-center" role="tablist">
                            <li class="nav-item mb-2">
                                <a class="nav-link active ls-normal" href="#tab1-1"
                                    data-container="all-products-container" data-type="all">All Products</a>
                            </li>
                            <li class="nav-item mb-2">
                                <a class="nav-link ls-normal" href="#tab1-2" data-container="best-deals-container"
                                    data-type="best-deals">Best Deals</a>
                            </li>
                            <li class="nav-item mb-2">
                                <a class="nav-link ls-normal" href="#tab1-3" data-container="new-arrivals-container"
                                    data-type="new-arrivals">New Arrivals</a>
                            </li>
                            <li class="nav-item mb-2">
                                <a class="nav-link ls-normal" href="#tab1-4" data-container="best-seller-container"
                                    data-type="best-seller">Best Seller</a>
                            </li>
                            <li class="nav-item mb-2">
                                <a class="nav-link ls-normal" href="#tab1-5" data-container="top-rated-container"
                                    data-type="top-rated">Top Rated</a>
                            </li>
                        </ul>
                    </div>
                    <!-- End of Tab -->
                    <div class="tab-content product-wrapper appear-animate">
                        <!-- All Products Tab -->
                        <div class="tab-pane active" id="tab1-1">
                            <div class="swiper-container swiper-theme latest-product-wrapper shadow-swiper appear-animate mb-0"
                                data-swiper-options="{
                          'spaceBetween': 20,
                          'slidesPerView': 2,
                          'breakpoints': {
                            '576': { 'slidesPerView': 2 },
                            '768': { 'slidesPerView': 3 },
                            '992': { 'slidesPerView': 4 },
                            '1200': { 'slidesPerView': 5 }
                          }
                        }">
                                <div class="swiper-wrapper row cols-lg-5 cols-md-4 cols-sm-3 cols-2"
                                    id="all-products-container">
                                    <!-- Products will be loaded here dynamically -->
                                </div>
                            </div>
                        </div>

                        <!-- Best Deals Tab -->
                        <div class="tab-pane" id="tab1-2">
                            <div class="swiper-container swiper-theme latest-product-wrapper shadow-swiper appear-animate mb-0"
                                data-swiper-options="{
                          'spaceBetween': 20,
                          'slidesPerView': 2,
                          'breakpoints': {
                            '576': { 'slidesPerView': 2 },
                            '768': { 'slidesPerView': 3 },
                            '992': { 'slidesPerView': 4 },
                            '1200': { 'slidesPerView': 5 }
                          }
                        }">
                                <div class="swiper-wrapper row cols-lg-5 cols-md-4 cols-sm-3 cols-2"
                                    id="best-deals-container">
                                    <!-- Products will be loaded here dynamically -->
                                </div>
                            </div>
                        </div>

                        <!-- New Arrivals Tab -->
                        <div class="tab-pane" id="tab1-3">
                            <div class="swiper-container swiper-theme latest-product-wrapper shadow-swiper appear-animate mb-0"
                                data-swiper-options="{
                          'spaceBetween': 20,
                          'slidesPerView': 2,
                          'breakpoints': {
                            '576': { 'slidesPerView': 2 },
                            '768': { 'slidesPerView': 3 },
                            '992': { 'slidesPerView': 4 },
                            '1200': { 'slidesPerView': 5 }
                          }
                        }">
                                <div class="swiper-wrapper row cols-lg-5 cols-md-4 cols-sm-3 cols-2"
                                    id="new-arrivals-container">
                                    <!-- Products will be loaded here dynamically -->
                                </div>
                            </div>
                        </div>

                        <!-- Best Seller Tab -->
                        <div class="tab-pane" id="tab1-4">
                            <div class="swiper-container swiper-theme latest-product-wrapper shadow-swiper appear-animate mb-0"
                                data-swiper-options="{
                          'spaceBetween': 20,
                          'slidesPerView': 2,
                          'breakpoints': {
                            '576': { 'slidesPerView': 2 },
                            '768': { 'slidesPerView': 3 },
                            '992': { 'slidesPerView': 4 },
                            '1200': { 'slidesPerView': 5 }
                          }
                        }">
                                <div class="swiper-wrapper row cols-lg-5 cols-md-4 cols-sm-3 cols-2"
                                    id="best-seller-container">
                                    <!-- Products will be loaded here dynamically -->
                                </div>
                            </div>
                        </div>

                        <!-- Top Rated Tab -->
                        <div class="tab-pane" id="tab1-5">
                            <div class="swiper-container swiper-theme latest-product-wrapper shadow-swiper appear-animate mb-0"
                                data-swiper-options="{
                          'spaceBetween': 20,
                          'slidesPerView': 2,
                          'breakpoints': {
                            '576': { 'slidesPerView': 2 },
                            '768': { 'slidesPerView': 3 },
                            '992': { 'slidesPerView': 4 },
                            '1200': { 'slidesPerView': 5 }
                          }
                        }">
                                <div class="swiper-wrapper row cols-lg-5 cols-md-4 cols-sm-3 cols-2"
                                    id="top-rated-container">
                                    <!-- Products will be loaded here dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End of Tab Content -->

                    <script>
                        document.addEventListener('DOMContentLoaded', function () {
                            // Load products for each tab
                            loadProducts('all', 'all-products-container');
                            loadProducts('best-deals', 'best-deals-container');
                            loadProducts('new-arrivals', 'new-arrivals-container');
                            loadProducts('best-seller', 'best-seller-container');
                            loadProducts('top-rated', 'top-rated-container');

                            // Tab click handlers
                            document.querySelectorAll('.nav-tabs a').forEach(tab => {
                                tab.addEventListener('click', function (e) {
                                    e.preventDefault();
                                    // Activate tab
                                    document.querySelectorAll('.nav-tabs a').forEach(t => t.classList.remove('active'));
                                    this.classList.add('active');
                                    document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
                                    const tabId = this.getAttribute('href');
                                    const tabPane = document.querySelector(tabId);
                                    if (tabPane) tabPane.classList.add('active');

                                    const containerId = this.getAttribute('data-container');
                                    const type = this.getAttribute('data-type');
                                    const container = document.getElementById(containerId);

                                    if (container && container.children.length === 0) {
                                        loadProducts(type, containerId);
                                    }
                                });
                            });
                        });

                        function loadProducts(type, containerId) {
                            const container = document.getElementById(containerId);
                            if (!container) {
                                console.error('Container not found:', containerId);
                                return;
                            }
                            fetch(`/product-type/${type}?limit=10`)
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success && data.products.length > 0) {
                                        container.innerHTML = '';

                                        data.products.forEach(product => {
                                            const productElement = createProductElement(product);
                                            container.appendChild(productElement);
                                        });

                                        // Find the swiper-container parent
                                        let swiperContainer = container;
                                        while (swiperContainer && !swiperContainer.classList.contains('swiper-container')) {
                                            swiperContainer = swiperContainer.parentElement;
                                        }
                                        if (swiperContainer) {
                                            new Swiper(swiperContainer, {
                                                spaceBetween: 20,
                                                slidesPerView: 2,
                                                breakpoints: {
                                                    576: { slidesPerView: 2 },
                                                    768: { slidesPerView: 3 },
                                                    992: { slidesPerView: 4 },
                                                    1200: { slidesPerView: 5 }
                                                }
                                            });
                                        }
                                    }
                                })
                                .catch(error => console.error('Error loading products:', error));
                        }
                        // Cart functionality
                        document.addEventListener('DOMContentLoaded', function () {
                            const selectedVariants = {};

                            function updateSelectedVariantInfo(productId) {
                                const productEl = document.querySelector(`.swiper-slide[data-product-id="${productId}"]`);
                                if (!productEl) return;
                                const infoDiv = productEl.querySelector('.selected-variant-info');
                                if (!infoDiv) return;
                                const variant = selectedVariants[productId] || {};
                                let info = '';

                                // Highlight selected size
                                if (productEl.getAttribute('data-has-size') === 'true') {
                                    const selectedSize = variant.selectedSize;
                                    productEl.querySelectorAll('.size-option').forEach(el => {
                                        if (el.getAttribute('data-size') === selectedSize) {
                                            el.classList.add('active');
                                        } else {
                                            el.classList.remove('active');
                                        }
                                    });
                                    info += selectedSize
                                        ? `<span class="mr-2"><strong>Size:</strong> <span class="badge badge-success">${selectedSize}</span></span>`
                                        : `<span class="mr-2 text-danger">Select Size</span>`;
                                }

                                // Highlight selected color
                                if (productEl.getAttribute('data-has-color') === 'true') {
                                    const selectedColor = variant.selectedColor;
                                    productEl.querySelectorAll('.color-option').forEach(el => {
                                        if (el.getAttribute('data-color') === selectedColor) {
                                            el.classList.add('active');
                                        } else {
                                            el.classList.remove('active');
                                        }
                                    });
                                    info += selectedColor
                                        ? `<span class="mr-2"><strong>Color:</strong> <span class="badge badge-success" style="background:${selectedColor};color:#fff;border:1px solid #ccc;">${selectedColor}</span></span>`
                                        : `<span class="mr-2 text-danger">Select Color</span>`;
                                }

                                infoDiv.innerHTML = info;
                            }

                            // Size selection
                            document.addEventListener('click', function (e) {
                                if (e.target.classList.contains('size-option')) {
                                    const el = e.target;
                                    const productEl = el.closest('.swiper-slide');
                                    const productId = productEl.getAttribute('data-product-id');
                                    // Remove active from siblings
                                    productEl.querySelectorAll('.size-option').forEach(sib => sib.classList.remove('active'));
                                    el.classList.add('active');
                                    selectedVariants[productId] = selectedVariants[productId] || {};
                                    selectedVariants[productId].selectedSize = el.getAttribute('data-size');
                                    updateSelectedVariantInfo(productId);
                                }
                            });

                            // Color selection
                            document.addEventListener('click', function (e) {
                                if (e.target.classList.contains('color-option')) {
                                    const el = e.target;
                                    const productEl = el.closest('.swiper-slide');
                                    const productId = productEl.getAttribute('data-product-id');
                                    // Remove active from siblings
                                    productEl.querySelectorAll('.color-option').forEach(sib => sib.classList.remove('active'));
                                    el.classList.add('active');
                                    selectedVariants[productId] = selectedVariants[productId] || {};
                                    selectedVariants[productId].selectedColor = el.getAttribute('data-color');
                                    updateSelectedVariantInfo(productId);
                                }
                            });

                            // Add to Cart button
                            document.addEventListener('click', async function (e) {
                                if (e.target.classList.contains('add-to-cart-btn')) {
                                    e.preventDefault();
                                    const btn = e.target;
                                    const productId = btn.getAttribute('data-product-id');
                                    const hasColor = btn.getAttribute('data-has-color') === 'true';
                                    const hasSize = btn.getAttribute('data-has-size') === 'true';
                                    const productName = btn.getAttribute('data-product-name');
                                    const productImage = btn.getAttribute('data-product-image');
                                    const productPrice = btn.getAttribute('data-product-price') ?
                                        parseFloat(btn.getAttribute('data-product-price')) : null;

                                    let selectedColor = null;
                                    let selectedSize = null;

                                    if (hasColor) {
                                        selectedColor = (selectedVariants[productId] && selectedVariants[productId].selectedColor) || null;
                                        if (!selectedColor) {
                                            showToast('Please select a color.', "error");
                                            updateSelectedVariantInfo(productId);
                                            return;
                                        }
                                    }

                                    if (hasSize) {
                                        selectedSize = (selectedVariants[productId] && selectedVariants[productId].selectedSize) || null;
                                        if (!selectedSize) {
                                            showToast('Please select a size.', "error");
                                            updateSelectedVariantInfo(productId);
                                            return;
                                        }
                                    }

                                    await addToCart(productId, 1, selectedColor, selectedSize, productName, productImage, productPrice);
                                }
                            });

                            // Initialize variant info on new products
                            const observer = new MutationObserver(function (mutations) {
                                mutations.forEach(function (mutation) {
                                    mutation.addedNodes.forEach(function (node) {
                                        if (node.nodeType === 1 && node.classList && node.classList.contains('swiper-slide')) {
                                            const productId = node.getAttribute('data-product-id');
                                            updateSelectedVariantInfo(productId);
                                        }
                                    });
                                });
                            });

                            // Observe all product containers
                            document.querySelectorAll('[id$="-container"]').forEach(container => {
                                observer.observe(container, { childList: true, subtree: true });
                            });
                        });

                        function showToast(message, type = "success") {
                            Toastify({
                                text: message,
                                duration: 2500,
                                close: true,
                                gravity: "top",
                                position: "right",
                                backgroundColor: type === "success"
                                    ? "linear-gradient(90deg, #00b09b, #96c93d)"
                                    : "linear-gradient(90deg, #e74c3c, #c0392b)",
                                stopOnFocus: true
                            }).showToast();
                        }

                        async function addToCart(productId, quantity = 1, selectedColor = null, selectedSize = null, productName = null, productImage = null, productPrice = null) {
                            const isLoggedIn = window.isLoggedIn === true || window.isLoggedIn === 'true';

                            const item = {
                                productId,
                                quantity,
                                selectedColor,
                                selectedSize,
                                productName,
                                productImage,
                                price: productPrice
                            };

                            if (isLoggedIn) {
                                try {
                                    const res = await fetch('/add-cart', {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        credentials: 'include',
                                        body: JSON.stringify(item)
                                    });

                                    const data = await res.json();
                                    if (data.error) {
                                        showToast(data.error, "error");
                                        return;
                                    }

                                    showToast("Product added to your cart!", "success");
                                } catch (err) {
                                    console.error("Error adding to cart:", err);
                                    showToast("Error adding to cart.", "error");
                                }
                            } else {
                                let guestCart = JSON.parse(localStorage.getItem('guestCart')) || [];

                                const exists = guestCart.find(p =>
                                    p.productId === item.productId &&
                                    p.selectedColor === item.selectedColor &&
                                    p.selectedSize === item.selectedSize
                                );

                                if (exists) {
                                    exists.quantity += item.quantity;
                                } else {
                                    guestCart.push(item);
                                }

                                localStorage.setItem('guestCart', JSON.stringify(guestCart));
                                showToast("Product added to guest cart!", "success");
                            }
                        }

                        function createProductElement(product) {
                            // Determine price display
                            const priceHtml = product.salePrice > 0
                                ? `<ins class="new-price">â‚¹${product.salePrice.toFixed(2)}</ins><del class="old-price">â‚¹${product.basePrice.toFixed(2)}</del>`
                                : `<ins class="new-price">â‚¹${product.basePrice.toFixed(2)}</ins>`;

                            // Create size options if available
                            let sizeOptions = '';
                            if (product.hasSizeVariants && product.sizeVariants) {
                                sizeOptions = product.sizeVariants.map(size =>
                                    `<span class="size-option badge badge-light border px-2 py-1 mr-1"
                  data-size="${size.size}"
                  data-stock="${size.stock}"
                  style="cursor:pointer;">
               ${size.size}
             </span>`
                                ).join('');
                            }

                            // Create color options if available
                            let colorOptions = '';
                            if (product.hasColorVariants && product.colorVariants) {
                                colorOptions = product.colorVariants.map(color =>
                                    `<span class="color-option border rounded-circle d-inline-block mr-1 mb-1"
                  data-color="${color.color}"
                  data-stock="${color.stock}"
                  title="${color.color}"
                  style="width:22px;height:22px;cursor:pointer;background:${color.color};border:2px solid #eee;">
             </span>`
                                ).join('');
                            }

                            // Main product HTML
                            return document.createRange().createContextualFragment(`
        <div class="swiper-slide product product-image-gap product-simple"
            data-product-id="${product._id}"
            data-has-color="${product.hasColorVariants}"
            data-has-size="${product.hasSizeVariants}"
            data-product-name="${product.name.replace(/"/g, '&quot;')}"
            data-product-image="${product.images && product.images[0] ? product.images[0] : ''}"
            data-product-price="${product.salePrice || product.basePrice}">

            <figure class="product-media">
                <a href="/product/${product._id}">
                    ${product.images && product.images[0] ?
                                    `<img src="${product.images[0]}" alt="${product.name}" width="295" height="335" />` :
                                    '<img src="/images/placeholder-product.jpg" alt="Product" width="295" height="335" />'}
                    ${product.images && product.images[1] ?
                                    `<img src="${product.images[1]}" alt="${product.name}" width="295" height="335" />` : ''}
                </a>
            </figure>

            <div class="product-details">
                <a href="#" class="btn-wishlist w-icon-heart" title="Add to wishlist"></a>
                <h4 class="product-name">
                    <a href="/product/${product._id}">${product.name}</a>
                </h4>

                <div class="product-variations flex flex-wrap mb-2">
                    ${product.hasSizeVariants ? `
                        <div class="product-size mr-3 d-flex align-items-center">
                            <span class="font-weight-bold mr-1">Size:</span>
                            <div>${sizeOptions}</div>
                        </div>` : ''}

                    ${product.hasColorVariants ? `
                        <div class="product-color">
                            <span class="font-weight-bold mr-1">Color:</span>
                            ${colorOptions}
                        </div>` : ''}
                </div>        

                <div class="product-pa-wrapper">
                    <div class="product-price">${priceHtml}</div>
                    <div class="product-action">
                        <button class="btn-cart btn-product btn btn-link btn-underline add-to-cart-btn"
                            data-product-id="${product._id}"
                            data-has-color="${product.hasColorVariants}"
                            data-has-size="${product.hasSizeVariants}"
                            data-product-name="${product.name.replace(/"/g, '&quot;')}"
                            data-product-image="${product.images && product.images[0] ? product.images[0] : ''}"
                            data-product-price="${product.salePrice || product.basePrice}">
                            Add To Cart
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `);
                        }
                    </script>

                    <div class="title-link-wrapper title-post after-none mb-4 appear-animate">
                        <h2 class="title font-secondary ls-normal mb-0">From Our Blog</h2>
                        <a href="blog-listing.html" class="font-weight-bold font-size-normal mb-0">
                            View All Articles
                            <i class="w-icon-long-arrow-right"></i>
                        </a>
                    </div>
                    <div class="swiper-container swiper-theme post-wrapper pb-2 pb-lg-0 mb-5 appear-animate"
                        data-swiper-options="{
                    'slidesPerView': 1,
                    'spaceBetween': 20,
                    'breakpoints': {
                        '576': {
                            'slidesPerView': 2
                        },
                        '768': {
                            'slidesPerView': 3
                        },
                        '992': {
                            'slidesPerView': 4,
                            'dots': false
                        }
                    }
                }">
                        <div class="swiper-wrapper row cols-lg-4 cols-md-3 cols-sm-2 cols-1">

                            <div class="swiper-slide post text-center overlay-zoom">
                                <figure class="post-media br-sm">
                                    <a href="post-single.html">
                                        <img src="/images/demos/demo12/blog/blog-1-650x440.jpg" alt="Post" width="325"
                                            height="214" style="background-color: #b8bfc4;" />
                                    </a>
                                </figure>
                                <div class="post-details">
                                    <div class="post-meta">
                                        by <a href="#" class="post-author">John Doe</a>
                                        - <a href="#" class="post-date mr-0">April 2, 2025</a>
                                    </div>
                                    <h4 class="post-title"><a href="post-single.html">Aliquam tincidunt maurisus</a>
                                    </h4>
                                    <a href="post-single.html" class="btn btn-link btn-dark btn-underline">
                                        Read More
                                        <i class="w-icon-long-arrow-right"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="swiper-slide post text-center overlay-zoom">
                                <figure class="post-media br-sm">
                                    <a href="post-single.html">
                                        <img src="/images/demos/demo12/blog/blog-2-650x440.jpg" alt="Post" width="325"
                                            height="214" style="background-color: #596066;" />
                                    </a>
                                </figure>
                                <div class="post-details">
                                    <div class="post-meta">
                                        by <a href="#" class="post-author">John Doe</a>
                                        - <a href="#" class="post-date mr-0">April 2, 2025</a>
                                    </div>
                                    <h4 class="post-title"><a href="post-single.html">Vivamus Vestibulum Ntulla Nec
                                            Ante</a>
                                    </h4>
                                    <a href="post-single.html" class="btn btn-link btn-dark btn-underline">Read More<i
                                            class="w-icon-long-arrow-right"></i></a>
                                </div>
                            </div>
                            <div class="swiper-slide post text-center overlay-zoom">
                                <figure class="post-media br-sm">
                                    <a href="post-single.html">
                                        <img src="/images/demos/demo12/blog/blog-3-650x440.jpg" alt="Post" width="325"
                                            height="214" style="background-color: #eff3f4;" />
                                    </a>
                                </figure>
                                <div class="post-details">
                                    <div class="post-meta">
                                        by <a href="#" class="post-author">John Doe</a>
                                        - <a href="#" class="post-date mr-0">April 2, 2025</a>
                                    </div>
                                    <h4 class="post-title"><a href="post-single.html">Ligula sollicitudin Laoreet
                                            viverra</a></h4>
                                    <a href="post-single.html" class="btn btn-link btn-dark btn-underline">Read More<i
                                            class="w-icon-long-arrow-right"></i></a>
                                </div>
                            </div>
                            <div class="swiper-slide post text-center overlay-zoom">
                                <figure class="post-media br-sm">
                                    <a href="post-single.html">
                                        <img src="/images/demos/demo12/blog/blog-4-650x440.jpg" alt="Post" width="325"
                                            height="214" style="background-color: #68605e;" />
                                    </a>
                                </figure>
                                <div class="post-details">
                                    <div class="post-meta">
                                        by <a href="#" class="post-author">John Doe</a>
                                        - <a href="#" class="post-date mr-0">April 2, 2025</a>
                                    </div>
                                    <h4 class="post-title"><a href="post-single.html">Cras Ornare Tristique Elit</a>
                                    </h4>
                                    <a href="post-single.html" class="btn btn-link btn-dark btn-underline">Read More<i
                                            class="w-icon-long-arrow-right"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-pagination mt-2"></div>
                    </div>
                </div>
                <!-- End of Container -->

        </main>
        <!-- End of Main -->

        <!-- Start of Footer -->
        <footer class="footer appear-animate" data-animation-options="{
            'name': 'fadeIn'
        }">
            <div class="footer-newsletter bg-primary">
                <div class="container">
                    <div class="row justify-content-center align-items-center">
                        <div class="col-xl-5 col-lg-6">
                            <div class="icon-box icon-box-side text-white">
                                <div class="icon-box-icon d-inline-flex">
                                    <i class="w-icon-envelop3"></i>
                                </div>
                                <div class="icon-box-content">
                                    <h4 class="icon-box-title text-white text-uppercase font-weight-bold">Subscribe To
                                        Our Newsletter</h4>
                                    <p class="text-white">Get all the latest information on Events, Sales and Offers.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-7 col-lg-6 col-md-9 mt-4 mt-lg-0 ">
                            <form action="#" method="get"
                                class="input-wrapper input-wrapper-inline input-wrapper-rounded">
                                <input type="email" class="form-control mr-2 bg-white" name="email" id="email"
                                    placeholder="Your E-mail Address" />
                                <button class="btn btn-dark btn-rounded" type="submit">Subscribe<i
                                        class="w-icon-long-arrow-right"></i></button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="footer-top">
                    <div class="row">
                        <div class="col-lg-4 col-sm-6">
                            <div class="widget widget-about mt-0 mb-4">
                                <a href="/" class="logo-footer">
                                    <img src="/images/logo.png" alt="logo-footer" width="200" height="45" />
                                </a>
                                <div class="widget-body">
                                    <p class="widget-about-title">Got Question? Call us 24/7</p>
                                    <a href="tel:18005707777" class="widget-about-call">1-800-570-7777</a>
                                    <p class="widget-about-desc">Register now to get updates on pronot get up icons
                                        & coupons ster now toon.
                                    </p>

                                    <div class="social-icons social-icons-colored">
                                        <a href="#" class="social-icon social-facebook w-icon-facebook"></a>
                                        <a href="#" class="social-icon social-twitter w-icon-twitter"></a>
                                        <a href="#" class="social-icon social-instagram w-icon-instagram"></a>
                                        <a href="#" class="social-icon social-youtube w-icon-youtube"></a>
                                        <a href="#" class="social-icon social-pinterest w-icon-pinterest"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="widget">
                                <h3 class="widget-title">Company</h3>
                                <ul class="widget-body">
                                    <li><a href="about-us.html">About Us</a></li>
                                    <li><a href="#">Team Member</a></li>
                                    <li><a href="#">Career</a></li>
                                    <li><a href="/contact">Contact Us</a></li>
                                    <li><a href="#">Affilate</a></li>
                                    <li><a href="#">Order History</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="widget">
                                <h4 class="widget-title">My Account</h4>
                                <ul class="widget-body">
                                    <li><a href="#">Track My Order</a></li>
                                    <li><a href="/cart">View Cart</a></li>
                                    <li><a href="login.html">Sign In</a></li>
                                    <li><a href="#">Help</a></li>
                                    <li><a href="/wishlist">My Wishlist</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="widget">
                                <h4 class="widget-title">Customer Service</h4>
                                <ul class="widget-body">
                                    <li><a href="#">Payment Methods</a></li>
                                    <li><a href="#">Money-back guarantee!</a></li>
                                    <li><a href="#">Product Returns</a></li>
                                    <li><a href="#">Support Center</a></li>
                                    <li><a href="#">Shipping</a></li>
                                    <li><a href="#">Term and Conditions</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="footer-bottom">
                    <div class="footer-left">
                        <p class="copyright">Copyright Â© 2025 Hofmaan. All Rights Reserved.</p>
                    </div>
                    <div class="footer-right">
                        <span class="payment-label mr-lg-8">We're using safe payment for</span>
                        <figure class="payment">
                            <img src="/images/payment.png" alt="payment" width="159" height="25" />
                        </figure>
                    </div>
                </div>
            </div>
        </footer>
        <!-- End of Footer -->
    </div>
    <!-- End of Page-wrapper -->

    <div class="btm-main">
        <div class="search-bar" id="searchBar">
            <div class="search-container">
                <div class="search-input-wrapper">
                    <i class="fas fa-search search-input-icon"></i>
                    <input type="text" class="search-input" placeholder="Search products..." id="searchInput">
                </div>
                <button class="search-btn" id="searchButton">
                    <i class="fas fa-search"></i>
                </button>

            </div>
        </div>

        <nav class="mobile-bottom-nav">

            <div class="mob-btm-nav">
                <a href="/cart" class="sticky-link1">
                    <i class="fas fa-shopping-cart"></i>
                    <p>Cart</p>
                </a>
            </div>

            <div class="mob-btm-nav">
                <a href="/orders" class="sticky-link1">
                    <i class="fas fa-clipboard-list"></i>
                    <p>Orders</p>
                </a>
            </div>

            <div class="mob-btm-nav">
                <a href="#0" id="searchBtn" class="sticky-link1">
                    <i class="fas fa-search"></i>
                    <p>Search</p>
                </a>
            </div>

            <div class="mob-btm-nav">
                <a href="/wishlist" class="sticky-link1">
                    <i class="fas fa-heart"></i>
                    <p>Wishlist</p>
                </a>
            </div>
        </nav>
    </div>

    <div class="sticky-footer sticky-content fix-bottom">

        <a href="/" class="sticky-link  active-mob">
            <i class="w-icon-home"></i>
            <p>Home</p>
        </a>
        <a href="/store" class="sticky-link">
            <i class="w-icon-products"></i>
            <p>Store</p>
        </a>
        <a class="btm-img" href="/"> <img src="/images/logo-2.png" alt=""></a>
        <% if (user) { %>
            <a href="/account" class="sticky-link">
                <i class="w-icon-account"></i>
                <p>Account</p>
            </a>
            <% } else { %>
                <a href="/login" class="sticky-link">
                    <i class="w-icon-account"></i>
                    <p>Login</p>
                </a>
                <% } %>


                    <a href="contact-us.html" class="sticky-link">
                        <i class="w-icon-call2"></i>
                        <p>Contact </p>
                    </a>
    </div>

    <!-- Start of Scroll Top -->
    <a id="scroll-top" class="scroll-top" href="#top" title="Top" role="button"> <i class="w-icon-angle-up"></i> <svg
            version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 70">
            <circle id="progress-indicator" fill="transparent" stroke="#000000" stroke-miterlimit="10" cx="35" cy="35"
                r="34" style="stroke-dasharray: 16.4198, 400;"></circle>
        </svg> </a>
    <!-- End of Scroll Top -->

    <!-- Start of Mobile Menu -->
    <div class="mobile-menu-wrapper">
        <div class="mobile-menu-overlay"></div>
        <!-- End of .mobile-menu-overlay -->

        <a href="#" class="mobile-menu-close"><i class="close-icon"></i></a>
        <!-- End of .mobile-menu-close -->

        <div class="mobile-menu-container scrollable">
            <form action="#" method="get" class="input-wrapper">
                <input type="text" class="form-control" name="search" autocomplete="off" placeholder="Search"
                    required />
                <button class="btn btn-search" type="submit">
                    <i class="w-icon-search"></i>
                </button>
            </form>
            <!-- End of Search Form -->
            <div class="tab">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a href="#main-menu" class="nav-link active">Main Menu</a>
                    </li>
                    <li class="nav-item">
                        <a href="#categories" class="nav-link">Categories</a>
                    </li>
                </ul>
            </div>
            <div class="tab-content">
                <div class="tab-pane active" id="main-menu">
                    <ul class="mobile-menu">
                        <li><a href="/">Home</a></li>
                        <li>
                            <a href="demo12-shop.html">Shop</a>
                            <ul>
                                <li>
                                    <a href="#">Shop Pages</a>
                                    <ul>
                                        <li><a href="shop-banner-sidebar.html">Banner With Sidebar</a></li>
                                        <li><a href="/store">Boxed Banner</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Full Width Banner</a></li>
                                        <li><a href="shop-horizontal-filter.html">Horizontal Filter<span
                                                    class="tip tip-hot">Hot</span></a></li>
                                        <li><a href="shop-off-canvas.html">Off Canvas Sidebar<span
                                                    class="tip tip-new">New</span></a></li>
                                        <li><a href="shop-infinite-scroll.html">Infinite Ajax Scroll</a></li>
                                        <li><a href="shop-right-sidebar.html">Right Sidebar</a></li>
                                        <li><a href="shop-both-sidebar.html">Both Sidebar</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Shop Layouts</a>
                                    <ul>
                                        <li><a href="/store">3 Columns Mode</a></li>
                                        <li><a href="shop-grid-4cols.html">4 Columns Mode</a></li>
                                        <li><a href="shop-grid-5cols.html">5 Columns Mode</a></li>
                                        <li><a href="shop-grid-6cols.html">6 Columns Mode</a></li>
                                        <li><a href="shop-grid-7cols.html">7 Columns Mode</a></li>
                                        <li><a href="shop-grid-8cols.html">8 Columns Mode</a></li>
                                        <li><a href="shop-list.html">List Mode</a></li>
                                        <li><a href="shop-list-sidebar.html">List Mode With Sidebar</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Product Pages</a>
                                    <ul>
                                        <li><a href="product-variable.html">Variable Product</a></li>
                                        <li><a href="product-featured.html">Featured &amp; Sale</a></li>
                                        <li><a href="product-accordion.html">Data In Accordion</a></li>
                                        <li><a href="product-section.html">Data In Sections</a></li>
                                        <li><a href="product-swatch.html">Image Swatch</a></li>
                                        <li><a href="product-extended.html">Extended Info</a>
                                        </li>
                                        <li><a href="product-without-sidebar.html">Without Sidebar</a></li>
                                        <li><a href="product-video.html">360<sup>o</sup> &amp; Video<span
                                                    class="tip tip-new">New</span></a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Product Layouts</a>
                                    <ul>
                                        <li><a href="product-default.html">Default<span
                                                    class="tip tip-hot">Hot</span></a></li>
                                        <li><a href="product-vertical.html">Vertical Thumbs</a></li>
                                        <li><a href="product-grid.html">Grid Images</a></li>
                                        <li><a href="product-masonry.html">Masonry</a></li>
                                        <li><a href="product-gallery.html">Gallery</a></li>
                                        <li><a href="product-sticky-info.html">Sticky Info</a></li>
                                        <li><a href="product-sticky-thumb.html">Sticky Thumbs</a></li>
                                        <li><a href="product-sticky-both.html">Sticky Both</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="vendor-dokan-store.html">Vendor</a>
                            <ul>
                                <li>
                                    <a href="#">Store Listing</a>
                                    <ul>
                                        <li><a href="vendor-dokan-store-list.html">Store listing 1</a></li>
                                        <li><a href="vendor-wcfm-store-list.html">Store listing 2</a></li>
                                        <li><a href="vendor-wcmp-store-list.html">Store listing 3</a></li>
                                        <li><a href="vendor-wc-store-list.html">Store listing 4</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Vendor Store</a>
                                    <ul>
                                        <li><a href="vendor-dokan-store.html">Vendor Store 1</a></li>
                                        <li><a href="vendor-wcfm-store-product-grid.html">Vendor Store 2</a></li>
                                        <li><a href="vendor-wcmp-store-product-grid.html">Vendor Store 3</a></li>
                                        <li><a href="vendor-wc-store-product-grid.html">Vendor Store 4</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="blog.html">Blog</a>
                            <ul>
                                <li><a href="blog.html">Classic</a></li>
                                <li><a href="blog-listing.html">Listing</a></li>
                                <li>
                                    <a href="https://www.portotheme.com/html/wolmart/blog-grid.html">Grid</a>
                                    <ul>
                                        <li><a href="blog-grid-2cols.html">Grid 2 columns</a></li>
                                        <li><a href="blog-grid-3cols.html">Grid 3 columns</a></li>
                                        <li><a href="blog-grid-4cols.html">Grid 4 columns</a></li>
                                        <li><a href="blog-grid-sidebar.html">Grid sidebar</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Masonry</a>
                                    <ul>
                                        <li><a href="blog-masonry-2cols.html">Masonry 2 columns</a></li>
                                        <li><a href="blog-masonry-3cols.html">Masonry 3 columns</a></li>
                                        <li><a href="blog-masonry-4cols.html">Masonry 4 columns</a></li>
                                        <li><a href="blog-masonry-sidebar.html">Masonry sidebar</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Mask</a>
                                    <ul>
                                        <li><a href="blog-mask-grid.html">Blog mask grid</a></li>
                                        <li><a href="blog-mask-masonry.html">Blog mask masonry</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="post-single.html">Single Post</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="about-us.html">Pages</a>
                            <ul>

                                <li><a href="about-us.html">About Us</a></li>
                                <li><a href="become-a-vendor.html">Become A Vendor</a></li>
                                <li><a href="/contact">Contact Us</a></li>
                                <li><a href="login.html">Login</a></li>
                                <li><a href="faq.html">FAQs</a></li>
                                <li><a href="error-404.html">Error 404</a></li>
                                <li><a href="coming-soon.html">Coming Soon</a></li>
                                <li><a href="/wishlist">Wishlist</a></li>
                                <li><a href="/cart">Cart</a></li>
                                <li><a href="/checkout">Checkout</a></li>
                                <li><a href="my-account.html">My Account</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="elements.html">Elements</a>
                            <ul>
                                <li><a href="element-products.html">Products</a></li>
                                <li><a href="element-titles.html">Titles</a></li>
                                <li><a href="element-typography.html">Typography</a></li>
                                <li><a href="element-categories.html">Product Category</a></li>
                                <li><a href="element-buttons.html">Buttons</a></li>
                                <li><a href="element-accordions.html">Accordions</a></li>
                                <li><a href="element-alerts.html">Alert &amp; Notification</a></li>
                                <li><a href="element-tabs.html">Tabs</a></li>
                                <li><a href="element-testimonials.html">Testimonials</a></li>
                                <li><a href="element-blog-posts.html">Blog Posts</a></li>
                                <li><a href="element-instagrams.html">Instagrams</a></li>
                                <li><a href="element-cta.html">Call to Action</a></li>
                                <li><a href="element-vendors.html">Vendors</a></li>
                                <li><a href="element-icon-boxes.html">Icon Boxes</a></li>
                                <li><a href="element-icons.html">Icons</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="tab-pane" id="categories">
                    <ul class="mobile-menu">
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-tshirt2"></i>Fashion
                            </a>
                            <ul>
                                <li>
                                    <a href="#">Women</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">New Arrivals</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Best Sellers</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Trending</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Clothing</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Shoes</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Bags</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Accessories</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Jewlery &
                                                Watches</a></li>

                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Men</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">New Arrivals</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Best Sellers</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Trending</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Clothing</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Shoes</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Bags</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Accessories</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Jewlery &
                                                Watches</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-home"></i>Home & Garden
                            </a>
                            <ul>
                                <li>
                                    <a href="#">Bedroom</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Beds, Frames &
                                                Bases</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Dressers</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Nightstands</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Kid's Beds &
                                                Headboards</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Armoires</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Living Room</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Coffee Tables</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Chairs</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Tables</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Futons & Sofa
                                                Beds</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Cabinets &
                                                Chests</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Office</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Office Chairs</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Desks</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Bookcases</a></li>
                                        <li><a href="shop-fullwidth-banner.html">File Cabinets</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Breakroom
                                                Tables</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Kitchen & Dining</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Dining Sets</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Kitchen Storage
                                                Cabinets</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Bashers Racks</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Dining Chairs</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Dining Room
                                                Tables</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Bar Stools</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-electronics"></i>Electronics
                            </a>
                            <ul>
                                <li>
                                    <a href="#">Laptops &amp; Computers</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Desktop
                                                Computers</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Monitors</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Laptops</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Hard Drives &amp;
                                                Storage</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Computer
                                                Accessories</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">TV &amp; Video</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">TVs</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Home Audio
                                                Speakers</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Projectors</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Media Streaming
                                                Devices</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Digital Cameras</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Digital SLR
                                                Cameras</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Sports & Action
                                                Cameras</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Camera Lenses</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Photo Printer</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Digital Memory
                                                Cards</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Cell Phones</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Carrier Phones</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Unlocked Phones</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Phone & Cellphone
                                                Cases</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Cellphone
                                                Chargers</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-furniture"></i>Furniture
                            </a>
                            <ul>
                                <li>
                                    <a href="#">Furniture</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Sofas & Couches</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Armchairs</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Bed Frames</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Beside Tables</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Dressing Tables</a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Lighting</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Light Bulbs</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Lamps</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Celling Lights</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Wall Lights</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Bathroom
                                                Lighting</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Home Accessories</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Decorative
                                                Accessories</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Candals &
                                                Holders</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Home Fragrance</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Mirrors</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Clocks</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#">Garden & Outdoors</a>
                                    <ul>
                                        <li><a href="shop-fullwidth-banner.html">Garden
                                                Furniture</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Lawn Mowers</a>
                                        </li>
                                        <li><a href="shop-fullwidth-banner.html">Pressure
                                                Washers</a></li>
                                        <li><a href="shop-fullwidth-banner.html">All Garden
                                                Tools</a></li>
                                        <li><a href="shop-fullwidth-banner.html">Outdoor Dining</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-heartbeat"></i>Healthy & Beauty
                            </a>
                        </li>
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-gift"></i>Gift Ideas
                            </a>
                        </li>
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-gamepad"></i>Toy & Games
                            </a>
                        </li>
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-ice-cream"></i>Cooking
                            </a>
                        </li>
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-ios"></i>Smart Phones
                            </a>
                        </li>
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-camera"></i>Cameras & Photo
                            </a>
                        </li>
                        <li>
                            <a href="shop-fullwidth-banner.html">
                                <i class="w-icon-ruby"></i>Accessories
                            </a>
                        </li>
                        <li>
                            <a href="demo12-shop.html" class="font-weight-bold text-primary text-uppercase ls-25">
                                View All Categories<i class="w-icon-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Mobile Menu -->

    <script>
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const googleLogin = urlParams.get('googleLogin');

            if (googleLogin === 'true') {
                localStorage.removeItem('guestCart');
                console.log('ðŸ›’ Guest cart cleared after Google login');

                // Optionally clean the URL so query param disappears
                const cleanUrl = window.location.origin + window.location.pathname;
                window.history.replaceState({}, document.title, cleanUrl);
            }
        });
    </script>
    <script>
        // Prevent double Toastify notifications by ensuring only one event listener is attached
        (function () {
            const selectedVariants = {};

            function updateSelectedVariantInfo(productId) {
                const productEl = document.querySelector('.swiper-slide[data-product-id="' + productId + '"]');
                if (!productEl) return;
                const infoDiv = productEl.querySelector('.selected-variant-info');
                if (!infoDiv) return;
                const variant = selectedVariants[productId] || {};
                let info = '';
                if (productEl.getAttribute('data-has-size') === 'true') {
                    info += variant.selectedSize
                        ? `<span class="mr-2"><strong>Size:</strong> <span class="badge badge-success">${variant.selectedSize}</span></span>`
                        : `<span class="mr-2 text-danger">Select Size</span>`;
                }
                if (productEl.getAttribute('data-has-color') === 'true') {
                    info += variant.selectedColor
                        ? `<span class="mr-2"><strong>Color:</strong> <span class="badge badge-success" style="background:${variant.selectedColor};color:#fff;border:1px solid #ccc;">${variant.selectedColor}</span></span>`
                        : `<span class="mr-2 text-danger">Select Color</span>`;
                }
                infoDiv.innerHTML = info;
            }

            // Helper to remove all previous event listeners for add-to-cart-btn
            function removeAllAddToCartListeners() {
                const btns = document.querySelectorAll('.add-to-cart-btn');
                btns.forEach(btn => {
                    const newBtn = btn.cloneNode(true);
                    btn.parentNode.replaceChild(newBtn, btn);
                });
            }

            document.addEventListener('DOMContentLoaded', function () {
                // Remove any previously attached event listeners to prevent double firing
                removeAllAddToCartListeners();

                // Size selection
                document.querySelectorAll('.product-size .size-option').forEach(function (el) {
                    el.addEventListener('click', function () {
                        const productEl = el.closest('.swiper-slide');
                        const productId = productEl.getAttribute('data-product-id');
                        // Remove active from siblings
                        productEl.querySelectorAll('.product-size .size-option').forEach(sib => sib.classList.remove('active'));
                        el.classList.add('active');
                        selectedVariants[productId] = selectedVariants[productId] || {};
                        selectedVariants[productId].selectedSize = el.getAttribute('data-size');
                        updateSelectedVariantInfo(productId);
                    });
                });

                // Color selection
                document.querySelectorAll('.product-color .color-option').forEach(function (el) {
                    el.addEventListener('click', function () {
                        const productEl = el.closest('.swiper-slide');
                        const productId = productEl.getAttribute('data-product-id');
                        // Remove active from siblings
                        productEl.querySelectorAll('.product-color .color-option').forEach(sib => sib.classList.remove('active'));
                        el.classList.add('active');
                        selectedVariants[productId] = selectedVariants[productId] || {};
                        selectedVariants[productId].selectedColor = el.getAttribute('data-color');
                        updateSelectedVariantInfo(productId);
                    });
                });

                // Add to Cart button
                document.querySelectorAll('.add-to-cart-btn').forEach(function (btn) {
                    btn.addEventListener('click', async function (e) {
                        e.preventDefault();
                        const productId = btn.getAttribute('data-product-id');
                        const hasColor = btn.getAttribute('data-has-color') === 'true';
                        const hasSize = btn.getAttribute('data-has-size') === 'true';
                        const productName = btn.getAttribute('data-product-name');
                        const productImage = btn.getAttribute('data-product-image');
                        const productPrice = btn.getAttribute('data-product-price') ? parseFloat(btn.getAttribute('data-product-price')) : null;

                        let selectedColor = null;
                        let selectedSize = null;

                        if (hasColor) {
                            selectedColor = (selectedVariants[productId] && selectedVariants[productId].selectedColor) || null;
                            if (!selectedColor) {
                                showToast('Please select a color.', "error");
                                updateSelectedVariantInfo(productId);
                                return;
                            }
                        }
                        if (hasSize) {
                            selectedSize = (selectedVariants[productId] && selectedVariants[productId].selectedSize) || null;
                            if (!selectedSize) {
                                showToast('Please select a size.', "error");
                                updateSelectedVariantInfo(productId);
                                return;
                            }
                        }

                        await addToCart(productId, 1, selectedColor, selectedSize, productName, productImage, productPrice);
                    });
                });

                // On page load, show default variant info
                document.querySelectorAll('.swiper-slide.product').forEach(function (el) {
                    const productId = el.getAttribute('data-product-id');
                    updateSelectedVariantInfo(productId);
                });
            });

            window.showToast = function(message, type = "success") {
                // Prevent duplicate Toastify notifications by using a flag
                if (window._toastifyActive) return;
                window._toastifyActive = true;
                Toastify({
                    text: message,
                    duration: 2500,
                    close: true,
                    gravity: "top",
                    position: "right",
                    backgroundColor: type === "success"
                        ? "linear-gradient(90deg, #00b09b, #96c93d)"
                        : "linear-gradient(90deg, #e74c3c, #c0392b)",
                    stopOnFocus: true,
                    callback: function() {
                        window._toastifyActive = false;
                    }
                }).showToast();
                setTimeout(function() {
                    window._toastifyActive = false;
                }, 2600);
            };

            // Add price to guestCart
            window.addToCart = async function(productId, quantity = 1, selectedColor = null, selectedSize = null, productName = null, productImage = null, productPrice = null) {
                var isLoggedIn = <%= user ? 'true' : 'false' %>;
                isLoggedIn = (isLoggedIn === true || isLoggedIn === 'true');

                const item = { productId, quantity, selectedColor, selectedSize };

                if (productName) item.productName = productName;
                if (productImage) item.productImage = productImage;
                if (typeof productPrice === "number" && !isNaN(productPrice)) item.price = productPrice;

                if (isLoggedIn) {
                    localStorage.removeItem('guestCart');
                    try {
                        const res = await fetch('/add-cart', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            credentials: 'include',
                            body: JSON.stringify(item)
                        });

                        const data = await res.json();
                        if (data.error) {
                            showToast(data.error, "error");
                            return;
                        }

                        showToast("Product added to your cart!", "success");
                    } catch (err) {
                        console.error("Error adding to cart:", err);
                        showToast("Error adding to cart.", "error");
                    }
                } else {
                    let guestCart = JSON.parse(localStorage.getItem('guestCart')) || [];

                    const exists = guestCart.find(p =>
                        p.productId === item.productId &&
                        p.selectedColor === item.selectedColor &&
                        p.selectedSize === item.selectedSize
                    );

                    if (exists) {
                        exists.quantity += item.quantity;
                    } else {
                        guestCart.push(item);
                    }

                    localStorage.setItem('guestCart', JSON.stringify(guestCart));
                    showToast("Product added to guest cart!", "success");
                }
            };
        })();
    </script>
    <script>
        window.isLoggedIn = <%= user ? 'true' : 'false' %>;
    </script>

    <!-- Plugin JS File -->
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="/vendor/jquery/jquery.min.js"></script>
    <script src="/vendor/parallax/parallax.min.js"></script>
    <script src="/vendor/jquery.plugin/jquery.plugin.min.js"></script>
    <script src="/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
    <script src="/vendor/skrollr/skrollr.min.js"></script>
    <script src="/vendor/zoom/jquery.zoom.js"></script>
    <script src="/vendor/jquery.countdown/jquery.countdown.min.js"></script>

    <!-- Main JS -->
    <script src="/js/main.min.js"></script>
    <script src="/js/script.js"></script>
</body>

</html>